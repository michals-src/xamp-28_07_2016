if("undefined"==typeof jQuery)throw new Error("enedScroll's JavaScript requires jQuery");!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():(a.enedscroll=b(a.jQuery),a.basedm=a.basedm?a.basedm:"")}(this,function(a){"use strict";function b(a){var b=basedm,c=b,d=a,e=[];c="://"+c,d="://"+d;for(var f=0;f<=c.length-1;f++){var g=d[f]?d[f]:"";g===c[f]&&e.push(g)}return c.length===d.length&&e.join("")===c&&e.join("").length===c.length}function c(){this.init(),this.options=a.extend({},this.constructor.defaults)}function d(c){this.elements=[],this.parentCache=c,this.certificate=b(a(document)[0].domain)}var e=a.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("enedScroll's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4");c.defaults={enedPosition:"70px",enedSetColor:!1,selectorsSetColor:!1,enedColor:"orange",selectorsColor:"red","z-index":"99999"},c.prototype.option=function(b){return a.extend(this.options,b)},c.prototype.init=function(b){var c=this;a(document).ready(function(){c.style()}),a("body").append('<div class="ened"></div>')},c.prototype.style=function(){var b=this.options.enedSetColor?this.options.enedColor:"transparent",c=this.options.selectorsSetColor?this.options.selectorsColor:"transparent",d={".ened":{position:"fixed","z-index":this.options["z-index"],top:this.options.enedPosition,right:"0",width:"55px",height:"1px","background-color":b},"._ens":{position:"absolute","z-index":this.options["z-index"],width:"100%",height:"1px",top:"0",left:"0","background-color":c},"._ene":{position:"absolute","z-index":this.options["z-index"],width:"100%",height:"1px",bottom:"0",left:"0","background-color":c}},e="";a.each(d,function(a,b){var c=JSON.stringify(b).replace(/\"/g,"").replace(/\,/g,";");e=e+a+c+" "}),a("head").append('<style type="text/css">'+e.toString()+"</style>")},a.extend(d.prototype,{call:function(){var b=this;a.each(this.elements,function(c,d){var e=d.location.find(d.name),f=d,g=d.actions;a(document).on("scroll touchmove touchstart touched mousewheel DOMmousewheel",function(c){f.selectors.top=e.offset().top+d.manipulate[0],f.selectors.bottom=e.offset().top+e.outerHeight()+d.manipulate[1];var h=a(".ened").offset().top,i=f.selectors.top,j=f.selectors.bottom,k=j-i,l=/webkit|safari|opera|msie|mozilla.*mobile/i.test(navigator.userAgent);/safari.*mobile/i.test(navigator.userAgent),/opera.*mobile/i.test(navigator.userAgent),/msie.*mobile/i.test(navigator.userAgent),/mozilla.*mobile/i.test(navigator.userAgent);if(l){var m;m=a(document).height()>a(window).height()?window.scrollY:a(document).width()>a(window).width()?window.scrollX:0,h=70+m}var n=10*(h-i)/k/10,o=n<1e-4?0:n,p={before:!1,after:!1,focused:!1};o>=1&&h>j&&(o=1,p.after=!0),o<=0&&h<i&&(p.before=!0),o>0&&o<1&&(p.focused=!0);var q=!1,r={private:{getPosVal:function(a){var b=o,c=a,d=-c*(1/(1-c))+b*(1/(1-c));return q=d,d}},public:{getVal:function(a){var b,c=q?q:o,d=a[0]?a[0]:0,e=a[1]?a[1]:0,f=d+e*c,g=d+-d*c,h=d+(e-d)*c,i=d+-(d-e)*c,j=d+2*e*c,k=d+(e-d)*c;return c<.001&&(b=d),c>.001&&c<.99&&(0===d&&e>0&&(b=f),d>0&&0===e&&(b=g),d>0&&e>0&&d<e&&(b=h),d>0&&e>0&&e<d&&(b=i),0===d&&e<0&&(b=f),d<0&&0===e&&(b=g),d<0&&e<0&&d<e&&(b=h),d<0&&e<0&&d>e&&(b=i),d>0&&e<0&&d===-e&&(b=j),d<0&&e>0&&-d===e&&(b=j),d>0&&e<0&&d!=-e&&(b=k),d<0&&e>0&&-d!=e&&(b=k)),c>.99&&(b=e),b},pin:{before:function(b,c){var d=!!b.parent&&b.parent,e=!!b.item&&b.item,g=!(!c||!a.isNumeric(c))&&c;if(d&&e&&g){var h=a(d).find(e);f.manipulate[0]!=f.manipulate[1]?f.manipulate[0]:0;a(d).css({"max-height":h.height(),"padding-top":"0","padding-bottom":g+"px"}),a(h).css({position:"relative",top:"0px"})}},set:function(b,c){var d=!!b.parent&&b.parent,e=!!b.item&&b.item,g=b.index?b.index:1,h=!(!c||!a.isNumeric(c))&&c;if(d&&e&&h){var i=a(d).find(e),j=(f.manipulate[0]!=f.manipulate[1]?f.manipulate[0]:0,parseInt(enedscroll.options.enedPosition)-f.manipulate[0]);a(d).css({"margin-bottom":i.height(),"padding-top":h*g+"px","padding-bottom":h-h*g+"px"}),a(i).css({position:"fixed",top:1!=g?-((h*g+parseInt(enedscroll.options.enedPosition))/10+20):j+"px"})}},after:function(b,c){var d=!!b.parent&&b.parent,e=!!b.item&&b.item,g=b.index?b.index:1,h=!(!c||!a.isNumeric(c))&&c;if(d&&e&&h){var i=a(d).find(e),j=f.manipulate[0]!=f.manipulate[1]?-f.manipulate[0]:0,j=0!=j&&0!=f.manipulate[1]?j+f.manipulate[1]:j;a(d).css({"max-height":i.height(),"padding-top":h*g+"px","padding-bottom":h-h*g+"px"}),a(i).css({position:"relative",top:j+"px"})}}}}};p.selectors={top:f.manipulate[0],bottom:f.manipulate[1]},a.each(g,function(c,d){var e=c>1&&a.isNumeric(c)?c/100:c,f=a.isNumeric(e)&&e>.01?r.private.getPosVal(e):o,g={this:b.parentCache.constructor,num:Math.round(f*Math.pow(10,5))/Math.pow(10,5),params:p,helpers:r.public};"before"===e&&o<=0&&d(g),"after"===e&&o>=1&&d(g),"focusin"===e&&p.focused&&d(g),a.isNumeric(e)&&(e=Math.round(e*Math.pow(10,15))/Math.pow(10,15),1==e&&(e=.99),0==e&&(e=1e-4),o>=e&&p.focused&&d(g))})})})},get:function(){this.certificate&&(this.setSelectors(),this.call())},setSelectors:function(){var b=this;a.each(b.elements,function(c,d){var e=d.location.find(d.name),f=e.offset().top,g=f+a(e).outerHeight();b.elements[c].selectors={top:f+d.manipulate[0],bottom:g+d.manipulate[1]},enedscroll.options.selectorsSetColor&&(d.selectors.set&&"undefined"!=typeof d.selectors.set||e.find(a("._ens")).length||e.find(a("._ene")).length||(e.css({position:"relative"}),e.prepend('<div class="_ens"></div>'),e.append('<div class="_ene"></div>'),0!=d.manipulate[0]&&e.find("._ens").css({top:d.manipulate[0]+"px"}),0!=d.manipulate[1]&&e.find("._ene").css({bottom:-d.manipulate[1]+"px"}),d.selectors.set=!0))})},set:function(a){this.parentCache.actions=a,this.elements.push(this.parentCache)},addSpace:function(b,c){var d="object"==typeof b[0]?b[0]:a(b[0]),e=b[1],f=b[2]?b[2]:[0,0],g=!!b[3]&&b[3],h=c;d.append('<div class="'+e+'"></div>'),g&&d.find("."+e).css(g),this.elements.push({name:d.find("."+e)[0],constructor:d.find("."+e),childClass:e,location:d,actions:h,manipulate:f,type:"child"})}});var f={},g=0;return a.fn.extend({ened:function(b){return a.each(this,function(c,e){var h=b&&a.isArray(b)?b:[0,0],i={name:e,constructor:a(this),location:a(document),manipulate:h,selectors:{},type:"parent"};a(this).attr("data-ened-key",g),f[g]=new d(i),g++})},set:function(b){return a.each(this,function(c,d){var e=a(this).attr("data-ened-key");"undefined"!=typeof e&&null!=e&&e?("undefined"!=typeof b&&null!=b&&b||(b=function(){}),f[e].set(b)):console.log("Not defined ened key for this element")})},addSpace:function(b,c,d){return a.each(a(this),function(e,g){var h=a(this).attr("data-ened-key");"undefined"!=typeof h&&null!=h&&h?f[h].addSpace(b,c,d):console.log("Not defined ened key for this element")})},get:function(){return a.each(a(this),function(b,c){var d=a(this).attr("data-ened-key");"undefined"!=typeof d&&null!=d&&d?f[d].get():console.log("Not defined ened key for this element")})}}),new c});