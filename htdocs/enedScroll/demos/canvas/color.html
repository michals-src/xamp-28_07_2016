<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<link rel="stylesheet" href="/css/demo.css">
		<title> enedScroll ⁝⁝ DEMO ☕</title>
	</head>
	<body>
		
		<header role="main">
			<div class="container">
				<div class="wrap wrap-inner">
		
					<div class="left-side">
						<h2 class="text-logo"> enedScroll </h2>
					</div>

					<div class="right-side">
						<nav class="horizontal">
							<ul>
								<li><a href="/">Homepage</a></li>
								<li class="current-item"><a href="#">changing color</a></li>
							</ul>
						</nav>
					</div>

				</div>
			</div>
		</header>

		
		<div class="some-space">
			<div class="center-parent">
				<div class="center-child">
					<h2>Canvas changing color</h2>
				</div>
			</div>
		</div>
		<div class="scene text-center">
			<div class="container j-wh">
			<div class="some-space"></div>
			<div class="item" style="min-height: 400px;">

				<div class="center-parent">
					<div class="center-child">
						
						<div class="pointer">
							<h1 class="text-example"> canvas </h1>
							<canvas id="default-canvas"></canvas>
						</div>

					</div>
				</div>

			</div>

			</div>
			<div class="some-space"></div>
		</div>


	
		<footer role="main">
			<p> enedScroll demonstration </p>
		</footer>

		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script type="text/javascript" src="/js/enedScroll.js"></script>
		
		<script type="text/javascript">
			(function($){
				var w = $(window), wW = w.width(), wH = w.height();
				$('.j-wh').css({ 'height': wH + 'px' });

			})(jQuery);
		</script>

		<script type="text/javascript">
			
			(function($){

				var numberOfDots = 40;
				// Create canvas
				var myCanvas = function(){

					this.canvas = document.getElementById('default-canvas');
					this.context = this.canvas.getContext('2d');

					this.canvas.width = $('.item').width();
					this.canvas.height = $('.item').height();

					this.items = [];

					var maxW = this.canvas.width;
					var maxH = this.canvas.height;
					var min = 0;

					for( var x = 0; x < numberOfDots; x++ ){
						
						var properties = {
							x: Math.random() * (maxW - min) + min,
							y: Math.random() * (maxW - min) + min,
							radius: (Math.random() * (15 - 5) + 5)
						};

						properties.color = properties.basic_color = { 
								r: Math.floor(Math.random() * (255 - 0) + 0), 
								g: Math.floor(Math.random() * (255 - 0) + 0), 
								b: Math.floor(Math.random() * (255 - 0) + 0) 
						}

						this.items[x] = properties;

					}

					this.add();
				}

				myCanvas.prototype.add = function(){

					for( var i = 0; i < numberOfDots; i++ ){
						this.context.beginPath();
						this.context.arc( this.items[i].x, this.items[i].y, this.items[i].radius, 0, Math.PI * 2, false );
						this.context.fillStyle = 'rgb(' + this.items[i].color.r + ', ' + this.items[i].color.g + ', ' + this.items[i].color.b + ')';
						this.context.fill();
					}

				}

				myCanvas.prototype.changeColor = function(x,r,g,b){

					this.items[x].color = {
						'r': r, 
						'g': g, 
						'b': b
					};
					this.clear();
					this.add();

				}

				myCanvas.prototype.clear = function(){
					this.context.clearRect( 0,0, this.canvas.width, this.canvas.height );
				}

				var canvas = new myCanvas();
				var newColors = [];
				for(var x = 0; x < numberOfDots; x++){
					newColors[x] = {
						r: Math.floor(Math.random() * (255 - 0) + 0), 
						g: Math.floor(Math.random() * (255 - 0) + 0), 
						b: Math.floor(Math.random() * (255 - 0) + 0) 
					}
				}




				enedScroll.option({ 'show_all_triggers': true, 'show_all_selectors': true });

				var trigger = new enedScroll.Trigger( 'trigger-1', { top: '30%' } );
				var scene 	= new enedScroll( $('.item'), { top: 0, bottom: 0 }, trigger );

				scene.addCreation(function(e){

					var plugins = e.plugins, value = plugins.value();

					for(var x = 0; x < numberOfDots; x++){

						value.get([
							value.add([ canvas.items[x].basic_color.r, newColors[x].r ], {duration: '50%'}),
							value.add([ canvas.items[x].basic_color.g, newColors[x].g ], {duration: '50%'}),
							value.add([ canvas.items[x].basic_color.b, newColors[x].b ], {duration: '50%'})
						], function(e){
							canvas.changeColor( x, Math.floor( e[0] ), Math.floor( e[1] ), Math.floor( e[2] ) );
						});

					}

				});




			})(jQuery);

		</script>

	</body>
</html>